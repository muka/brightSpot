<!DOCTYPE html>
<html>
    <head>

        <title>brightSpot</title>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/css/foundation.min.css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/css/normalize.min.css">
        <link rel="stylesheet" href="css/style.css">

        <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/js/foundation/foundation.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/js/foundation/foundation.reveal.js"></script>

        <link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.3.1/leaflet.css" />
        <script src="//cdn.leafletjs.com/leaflet-0.3.1/leaflet.js"></script>
        <script src="//maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
        <script src="//matchingnotes.com/javascripts/leaflet-google.js"></script>

        <script src="/socket.io/socket.io.js"></script>
        <script>

            jQuery(document).ready(function(){

                $(document).foundation();


                var data = {
                    activity: ''
                };

//                var showMap = function() {
//                    var map = new L.Map('map', { center: new L.LatLng(51.51, -0.11), zoom: 9});
//                    var googleLayer = new L.Google('ROADMAP');
//                    map.addLayer(googleLayer);
//                };

                $('.input-subactivity').on("click", function() {

                    var v = $(this).data('reveal-id');

//                    $('#'+v)
                    $('#modal-subactivity')
                            .foundation('reveal')
                            .foundation('reveal', 'open', {});

                    $('.box-1,.box-2,.box-3').addClass("hide");
                    $('.box-1').removeClass("hide");

                    data = {};
                    console.log($(this).text());
                    data.activity = $(this).text();


                });

                $(document).on('click', '.close-reveal-modal', function() {
                    $('[data-reveal].open').foundation('reveal', 'close')
                });

                $("button.go-place").on("click", function() {

                    $('.box-1').addClass('hide');
                    $('.box-2').removeClass('hide');

//                    showMap();

                    return false;
                });


                $(".go-date").on("click", function() {


                    $('.box-2').addClass('hide');
                    $('.box-3').removeClass('hide');

                    return false;
                });

                $(".go-review").on("click", function() {

                    $('.page-propose').addClass('hide');
                    $('.page-review').removeClass('hide');

                    $('#modal-subactivity')
                            .foundation('reveal')
                            .foundation('reveal', 'close', {});

                    var date = $('#date-val').val();
                    var time = $('#time-val').val();


                     data.topic =  $('.box-1 input').val();
                     data.date = date + " " + time;
                     data.place =  $('#place-val').text();

                    console.log(data);

                    $('.data-activity').text(data.activity);
                    $('.data-topic').text(data.topic);
                    $('.data-place').text(data.place);

                    $('.data-date').text(date);
                    $('.data-time').text(time);


                    return false;
                });


                $('#lightup').on("click", function() {

                    $.post('/propose/send', data, function() {
                        alert("Sent!");
                    });

                })

            });




//
//            var socket = io.connect('http://localhost:8090');
//            socket.on('news', function(data) {
//                console.log(data);
//                socket.emit('my other event', {my: 'data'});
//            });

        </script>
    </head>
    <body>
        <div class="container">


            <div class="row">
                <div class="columns large-12">
                    <img src="img/logo.png" width="150" />
                </div>
            </div>

            <div class="page-propose">
                <div class="row">
                    <div class="columns large-12">

                        <div class="action-button input-subactivity">study</div>

                    </div>
                </div>
                <div class="row">
                    <div class="columns large-12">

                        <div class="action-button input-subactivity">co-working</div>

                    </div>
                </div>
                <div class="row">
                    <div class="columns large-12">
                        <div class="action-button input-subactivity">perform</div>
                    </div>
                </div>

            </div> <!-- /propose-->


            <div class="page-review hide">
                <div class="row">
                    <div class="columns large-12">

                        <div class="data-activity action-button"  data-reveal-id="modal-activity">

                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="columns large-12">

                        <div class="data-topic action-button"  data-reveal-id="modal-subactivity">

                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="columns large-12">
                        <div class="data-place action-button"  data-reveal-id="modal-map">

                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="columns large-6">
                        <div class="left data-date">
                        </div>
                    </div>
                    <div class="columns large-6">
                        <div class="right data-time">
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="columns large-12">
                        <br />
                        <br />
                        <div class="progress large-12 radius">
                            <span class="meter"></span>
                        </div>

                    </div>
                </div>

                <div class="row">
                    <div class="columns large-12">
                        <br />
                        <br />
                        <button id='lightup' class='button large-12'>light up !</button>
                    </div>
                </div>

            </div><!--review-->



        </div>


        <div id="modal-subactivity" class="reveal-modal hide" data-reveal>

            <br />
            <br />

            <div class="box-1">
                <p>Insert a topic</p>
                <input type="text" class="input" id="topic-val" value="economics" />
                <br />
                <button class="right go-place">Next »</button>
            </div>

            <div class="box-2 box-place hide">
                <p>Select a place</p>
                <ul>
                    <li id="place-val">via Siemens 19 Bolzano Bz</li>
                </ul>
                <button class="right go-date">Next »</button>
            </div>

            <div class="box-3 box-date hide">
                <p>Select a date</p>

                Date <input id="date-val" type="text" placeholder="31-02-2019" value="11-05-2014" />
                Time <input id="time-val" type="text" placeholder="21.00 - 23.00" value="01.00 - 15.00" />

                <button class="right go-review">Next »</button>
            </div>

            <a class="close-reveal-modal">&#215;</a>

        </div>


    </body>
</html>
